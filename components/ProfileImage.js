import React, {useState} from "react";import {Image, View, StyleSheet, TouchableOpacity, ActivityIndicator} from "react-native";import usersImage from '../assets/userImage.jpeg';import Colors from "../constants/Colors";import { FontAwesome } from '@expo/vector-icons';import {launchImagePicker, uploadImageAsync} from "../utils/ImagePickerHelper";import { updateSignedInUserData } from "../utils/actions/AuthActions";import {useDispatch} from "react-redux";import {updateLoggedInUserData} from "../store/authSlice";const ProfileImage = props => {    const dispatch = useDispatch();    const source = props.uri ? { uri: props.uri } : usersImage;    const [image, setImage] = useState(source);    const [isLoading, setIsLoading] = useState(false);    const showEditButton = props.showEditButton && props.showEditButton === true;    const userId = props.userId;    const pickImage = async () => {        try {            const tempUri = await launchImagePicker();            if (!tempUri) return;            //upload the image            setIsLoading(true);            const uploadUrl = await uploadImageAsync(tempUri);            setIsLoading(false);            if (!uploadUrl){                throw new error("Cloud not upload image");            }            const newData = { profilePicture: uploadUrl };            await updateLoggedInUserData(userId, newData);            dispatch(updateLoggedInUserData({ newData }));            setImage({ uri: tempUri });        }        catch (error) {            console.log(error);            setIsLoading(false);        }    }    const Container = showEditButton ? TouchableOpacity : View;    return (        <Container onPress={pickImage}>            {                isLoading ?                    <View height={props.size} width={props.size} style={styles.loadingContainer}>                        <ActivityIndicator size={'small'} color={Colors.primary} />                    </View> :                    <Image                        style={{ ...styles.image , ...{ width: props.size, height: props.size }}}                        source={image}                    />            }            {                showEditButton && !isLoading &&                <View style={styles.editIconContainer}>                    <FontAwesome name="pencil" size={15} color="black" />                </View>            }        </Container>    )}const styles = StyleSheet.create({    image: {        borderRadius: 50,        borderWidth: 1,        borderColor: Colors.gray    },    editIconContainer: {        position: "absolute",        bottom: 0,        right: 0,        backgroundColor: Colors.lightGray,        borderRadius: 20,        padding: 8    },    loadingContainer: {        justifyContent: "center",        alignItems: "center"    }})export default ProfileImage;